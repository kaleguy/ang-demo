{"version":3,"sources":["calendar.controller.js"],"names":[],"mappings":"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","file":"calendar.controller-compiled.js","sourcesContent":["(function () {\n    'use strict';\n\n    angular\n        .module('app.calendar')\n        .controller('CalendarController', CalendarController);\n\n\n    CalendarController.$inject =\n        ['$scope', '$timeout', '$compile', '$document', 'logger', 'uiCalendarConfig', 'CalendarService'];\n    /* @ngInject */\n    function CalendarController($scope, $timeout, $compile, $document, logger, uiCalendarConfig, CalendarService) {\n\n        var vm = this;\n        vm.title = 'Calendar';\n        var editable = true;\n        var events = [];\n\n        var data  = CalendarService.getCalendarData();\n        //vm = _.extend(vm, data);\n\n        const refresh = (force) => events.push(data.dummyEvents);\n        refresh();\n\n        /**\n         * ========== FullCalendar Setup ==============\n         */\n\n        /* config object */\n        let customButtons = {};\n        if (editable) {\n            customButtons = {\n                addButton: {\n                    text: 'Add Event',\n                    click:  () => { editEvent(); $scope.$apply(); }\n                }\n            }\n        }\n        customButtons.refreshButton = {\n            text: 'Refresh',\n            click:  () => {\n                $('.splash_small').show();\n                refresh(true);\n            },\n            icon: 'refresh'\n        };\n\n        let buttonIcons = {\n            refresh: 'left-single-arrow'\n        };\n\n        $scope.uiConfig = {\n\n            calendar: {\n                height: 'auto',\n                editable: editable,\n                droppable: true,\n                timezone: \"local\",\n                buttonIcons: buttonIcons,\n                customButtons: customButtons,\n                drop:  (date, jsEvent) => {},\n                header: {\n                    left: 'prev,next today addButton refreshButton',\n                    center: 'title',\n                    right: 'month,agendaWeek,agendaDay'\n                },\n                dayClick,\n                eventClick,\n                viewRender\n\n            }\n        };\n\n        $scope.eventSources = events;\n\n        /**\n         * eventClick\n         * @param calEvent\n         * @param jsEvent\n         */\n        function eventClick (calEvent, jsEvent) {\n\n           // let eventClicked = true;\n            let el = $(jsEvent.currentTarget);\n            let item = calEvent;\n\n            // use an underscore template for the first pass on the content\n            // because apparently not possible to get the height right when\n            // using ng $compile\n            let template = _.template($('#cal_pop').html());\n\n            let title = calEvent.title;\n            let description = calEvent.description;\n            if (!description) { description = '' }\n\n            // need this if text is too long\n            item.ellipsis_class = '';\n            let description_text = removeTags(description);\n            if (description_text.length > 200) {\n                item.ellipsis_class = 'ellipsis';\n            }\n\n            vm.yes_class = \"fa fa-check\";\n            vm.maybe_class = \"fa fa-question\";\n            vm.no_class = \"fa fa-times\";\n\n            function _showPopover(el) {\n\n                el.popover('show');\n                el.attr('pop', true);\n                let popid = '#' + el.attr(\"aria-describedby\");\n                el.attr('tabindex', 0);\n                el.attr('role', 'button');\n\n                // Once content is drawn, we can $compile it to get the\n                // ng commands to work\n                let contentEl = $(popid + ' .popover-content');\n                let contentElChild = $(popid + ' .tool-content');\n                let ng_template = contentElChild.html();\n                let ng_el = angular.element(ng_template);\n                let compiled = $compile(ng_el);\n                contentElChild.remove();\n                contentEl.append(ng_el);\n                compiled($scope);\n                $timeout(\n                    () => {$compile($('#pageslider'))},\n                    500);\n\n            }\n\n            // let time_description = 'TD';\n\n            item.participants || (item.participants = []);\n\n            //    let rsvp_status_descr = '';\n\n            el.popover({\n                title,\n                placement: 'right',\n                container: 'body',\n                html: true,\n                content: () => template(item)\n            });\n\n            _showPopover(el);\n\n        };\n\n        /* Navigate to the Agenda view of a particular day on clicking the day cell of the Month view */\n        function dayClick (date) { // view, calendar\n            let c = uiCalendarConfig.calendars.mainCalendar;\n            c.fullCalendar('changeView', 'agendaDay');\n            c.fullCalendar('gotoDate', date);\n            removePop();\n        };\n\n        function viewRender(){\n\n        }\n\n\n        activate();\n        function activate() {\n            logger.info('Activated Calendar View');\n        }\n    }\n})();\n"]}